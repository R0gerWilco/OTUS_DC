### Домашнее задание урока №3  Основы проектирования сети  модуля №1 Построение

##### Цель задания
- Собрать схему CLOS согласно топологии из двух Spine коммутаторов, 3 Leaf коммутаторов и 4 клиентских РМ согласно примера ниже
- Распределить адресное пространство.

##### Топология сети (пример)

 [<img src="CLOS_topology_example.JPG">](https://github.com/R0gerWilco/OTUS_DC/blob/main/Homework/Module1/Lesson03/CLOS_topology_example.JPG)

---

### Результаты ДЗ

##### Топология сети лабораторной работы PnetLAB

 [<img src="WEST_DC_topology.JPG">](https://github.com/R0gerWilco/OTUS_DC/blob/main/Homework/Module1/Lesson03/WEST_DC_topology.JPG)



### **1. Входные данные**:
- Название ЦОД - WEST (для будущего multi-site дизайна)
- 2 Spine коммутатора Nexus  с ID (номер) коммутаторов 201 и 202
- 3 Leaf коммутатора Nexus  с ID коммутаторов 101, 102 и 103
- ID коммутаторов должно стать часть IP-адресации Loopback и Underlay интерфейсов
- ID Leaf должно стать частью имени клиентских рабочих мест (VPC в терминологии PnetLAB)



### **2. Общая схема адресации**
- **Loopback-адреса** → `10.0.0.ID/32` (где ID = номер коммутатора) 
- **P2P-линки Spine ↔ Leaf** → `10.SpineID.LeafID.X/30` (SpineID = 201/202, LeafID = 101/102/103, X=1 для Spine и X=2 для Leaf ).  
- **Management-сеть** → `192.168.1.ID/24`  (где ID = номер коммутатора)  



### **3. Подробное раcпределение IP-адресов**
#### **3.1. Loopback-адреса (для протоколов BGP/OSPF/IS-IS)**
| Устройство        | Loopback (IPv4)  | Маска  | Назначение |  
|-------------------|------------------|--------|------------|
| **WEST_SPINE201** | `10.0.0.201/32`  | `/32`  | Underlay   |
| **WEST_SPINE202** | `10.0.0.202/32`  | `/32`  | Underlay   |
| **WEST_LEAF101**  | `10.0.0.101/32`  | `/32`  | Underlay   |
| **WEST_LEAF102**  | `10.0.0.102/32`  | `/32`  | Underlay   |
| **WEST_LEAF103**  | `10.0.0.103/32`  | `/32`  | Underlay   |

#### **3.2. P2P-линки (Spine ↔ Leaf)**
Используем **`/30`**  для экономии адресов (_Примечание: Nexus 9K в лабе не захотел работать с /31 P2P-линками Spine ↔ Leaf , в качестве  quick workaround используются /30 адресация_)   
Формат IP-адреса: **`10.SpineID.LeafID.0/30`**, где
   - Первый октет (`10`)  -принадлежность сети к RFC1918 диапазону 10.0.0.0/8
   - Второй октет (`201`) – идентификатор Spine.  
   - Третий октет (`101`) – идентификатор Leaf.  
   - Четвёртый октет (`.1` для Spine, `.2` для Leaf)

**Итоговая таблица P2P соединений:**

| Соединение (w/o DC Name)| Spine-адрес       | Leaf-адрес        | Подсеть            |
|-------------------------|-------------------|-------------------|--------------------|
| **Spine201 ↔ Leaf101**  | `10.201.101.1/30` | `10.201.101.2/30` | `10.201.101.0/30`  |
| **Spine201 ↔ Leaf102**  | `10.201.102.1/30` | `10.201.102.2/30` | `10.201.102.0/30`  |
| **Spine201 ↔ Leaf103**  | `10.201.103.1/30` | `10.201.103.2/30` | `10.201.103.0/30`  |
| **Spine202 ↔ Leaf101**  | `10.202.101.1/30` | `10.202.101.2/30` | `10.202.101.0/30`  |
| **Spine202 ↔ Leaf102**  | `10.202.102.1/30` | `10.202.102.2/30` | `10.202.102.0/30`  |
| **Spine202 ↔ Leaf103**  | `10.202.103.1/30` | `10.202.103.2/30` | `10.202.103.0/30`  |


#### **3.3. Management-сеть (Out-of-Band)**
| Устройство        | Management-адрес | Маска  |
|-------------------|------------------|--------|
| **WEST_SPINE201** | `192.168.1.201`  | `/24`  |
| **WEST_SPINE202** | `192.168.1.202`  | `/24`  |
| **WEST_LEAF101**  | `192.168.1.101`  | `/24`  |
| **WEST_LEAF102**  | `192.168.1.102`  | `/24`  |
| **WEST_LEAF103**  | `192.168.1.103`  | `/24`  |

---
#### **Пример конфигурации (WEST_SPINE201 ↔ WEST_LEAF101)**
**WEST_SPINE201:**
```bash
interface Ethernet1/1
  description TO_LEAF101
  no switchport
  ip address 10.201.101.1/30
  mtu 9216
```

**WEST_LEAF101:**
```bash
interface Ethernet1/6
  description TO_SPINE201
  no switchport
  ip address 10.201.101.2/30
  mtu 9216
```

